# Render.com Blueprint
# Deploy with: Connect repo to Render and it auto-deploys
# Frontend is deployed separately on Vercel
#
# IMPORTANT: Set environment variables in Render Dashboard manually
# Copy values from render.env file

services:
  # Backend API
  - type: web
    name: bitbreaker
    env: node
    region: oregon
    plan: starter
    buildCommand: cd backend && npm install
    startCommand: cd backend && npm start
    healthCheckPath: /api/health
    envVars:
      - key: NODE_ENV
        value: production
      - key: PORT
        value: 4000
      # CORS - Vercel frontend URL
      - key: FRONTEND_URL
        sync: false  # Set in Render Dashboard: https://bit-breaker-psi.vercel.app
      # Database - Neon PostgreSQL (set in Render Dashboard)
      - key: DATABASE_URL
        sync: false  # Set in Render Dashboard: postgresql://...
      # Redis for session persistence (set in Render Dashboard)
      - key: REDIS_URL
        sync: false  # Set in Render Dashboard: redis://...
      # LNbits Configuration (set in Render Dashboard)
      - key: LNBITS_URL
        sync: false
      - key: LNBITS_API_KEY
        sync: false
      - key: LNBITS_ADMIN_KEY
        sync: false
      - key: LNBITS_WEBHOOK_SECRET
        sync: false

# NOTE: We use Neon PostgreSQL (external), not Render-managed database
# No databases section needed
